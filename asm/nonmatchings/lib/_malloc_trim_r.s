.include "macro.inc"

.set noat      /* allow manual use of $at */
.set noreorder /* don't insert nops after branches */

glabel _malloc_trim_r
/* 2010 00101F10 A0FFBD27 */  addiu      $sp, $sp, -0x60
/* 2014 00101F14 2000B2FF */  sd         $18, 0x20($sp)
/* 2018 00101F18 0000B0FF */  sd         $16, 0x0($sp)
/* 201C 00101F1C 2D908000 */  daddu      $18, $4, $0
/* 2020 00101F20 4000B4FF */  sd         $20, 0x40($sp)
/* 2024 00101F24 2D80A000 */  daddu      $16, $5, $0
/* 2028 00101F28 1000B1FF */  sd         $17, 0x10($sp)
/* 202C 00101F2C 5000BFFF */  sd         $31, 0x50($sp)
/* 2030 00101F30 8A0D040C */  jal        __malloc_lock
/* 2034 00101F34 3000B3FF */   sd        $19, 0x30($sp)
/* 2038 00101F38 2500023C */  lui        $2, %hi(__malloc_av_)
/* 203C 00101F3C FFFF033C */  lui        $3, (0xFFFFFFFC >> 16)
/* 2040 00101F40 08FE5424 */  addiu      $20, $2, %lo(__malloc_av_)
/* 2044 00101F44 FCFF6334 */  ori        $3, $3, (0xFFFFFFFC & 0xFFFF)
/* 2048 00101F48 0800848E */  lw         $4, 0x8($20)
/* 204C 00101F4C 3C801000 */  dsll32     $16, $16, 0
/* 2050 00101F50 3E801000 */  dsrl32     $16, $16, 0
/* 2054 00101F54 00100524 */  addiu      $5, $0, 0x1000
/* 2058 00101F58 0400828C */  lw         $2, 0x4($4)
/* 205C 00101F5C 24104300 */  and        $2, $2, $3
/* 2060 00101F60 3C100200 */  dsll32     $2, $2, 0
/* 2064 00101F64 3E880200 */  dsrl32     $17, $2, 0
/* 2068 00101F68 2F803002 */  dsubu      $16, $17, $16
/* 206C 00101F6C A63B040C */  jal        __udivdi3
/* 2070 00101F70 EF0F0466 */   daddiu    $4, $16, 0xFEF
/* 2074 00101F74 FFFF4464 */  daddiu     $4, $2, -0x1
/* 2078 00101F78 8E3B040C */  jal        __muldi3
/* 207C 00101F7C 00100524 */   addiu     $5, $0, 0x1000
/* 2080 00101F80 2D804000 */  daddu      $16, $2, $0
/* 2084 00101F84 0010022A */  slti       $2, $16, 0x1000
/* 2088 00101F88 23004014 */  bnez       $2, .L00102018
/* 208C 00101F8C 2D204002 */   daddu     $4, $18, $0
/* 2090 00101F90 8212040C */  jal        _sbrk_r
/* 2094 00101F94 2D280000 */   daddu     $5, $0, $0
/* 2098 00101F98 0800838E */  lw         $3, 0x8($20)
/* 209C 00101F9C 3C201100 */  dsll32     $4, $17, 0
/* 20A0 00101FA0 3F200400 */  dsra32     $4, $4, 0
/* 20A4 00101FA4 21186400 */  addu       $3, $3, $4
/* 20A8 00101FA8 1B004314 */  bne        $2, $3, .L00102018
/* 20AC 00101FAC 2D204002 */   daddu     $4, $18, $0
/* 20B0 00101FB0 3C981000 */  dsll32     $19, $16, 0
/* 20B4 00101FB4 3F981300 */  dsra32     $19, $19, 0
/* 20B8 00101FB8 8212040C */  jal        _sbrk_r
/* 20BC 00101FBC 23281300 */   negu      $5, $19
/* 20C0 00101FC0 FFFF033C */  lui        $3, (0xFFFFFFFF >> 16)
/* 20C4 00101FC4 FFFF6334 */  ori        $3, $3, (0xFFFFFFFF & 0xFFFF)
/* 20C8 00101FC8 17004314 */  bne        $2, $3, .L00102028
/* 20CC 00101FCC 01000324 */   addiu     $3, $0, 0x1
/* 20D0 00101FD0 2D204002 */  daddu      $4, $18, $0
/* 20D4 00101FD4 8212040C */  jal        _sbrk_r
/* 20D8 00101FD8 2D280000 */   daddu     $5, $0, $0
/* 20DC 00101FDC 0800868E */  lw         $6, 0x8($20)
/* 20E0 00101FE0 2D284000 */  daddu      $5, $2, $0
/* 20E4 00101FE4 2388A600 */  subu       $17, $5, $6
/* 20E8 00101FE8 1000222A */  slti       $2, $17, 0x10
/* 20EC 00101FEC 0A004014 */  bnez       $2, .L00102018
/* 20F0 00101FF0 2500043C */   lui       $4, (0x250220 >> 16)
/* 20F4 00101FF4 01000224 */  addiu      $2, $0, 0x1
/* 20F8 00101FF8 2002838C */  lw         $3, (0x250220 & 0xFFFF)($4)
/* 20FC 00101FFC 25102202 */  or         $2, $17, $2
/* 2100 00102000 2500043C */  lui        $4, (0x250238 >> 16)
/* 2104 00102004 3C100200 */  dsll32     $2, $2, 0
/* 2108 00102008 3F100200 */  dsra32     $2, $2, 0
/* 210C 0010200C 2318A300 */  subu       $3, $5, $3
/* 2110 00102010 380283AC */  sw         $3, (0x250238 & 0xFFFF)($4)
/* 2114 00102014 0400C2AC */  sw         $2, 0x4($6)
.L00102018:
/* 2118 00102018 8C0D040C */  jal        __malloc_unlock
/* 211C 0010201C 2D204002 */   daddu     $4, $18, $0
/* 2120 00102020 0E000010 */  b          .L0010205C
/* 2124 00102024 2D100000 */   daddu     $2, $0, $0
.L00102028:
/* 2128 00102028 2F103002 */  dsubu      $2, $17, $16
/* 212C 0010202C 25104300 */  or         $2, $2, $3
/* 2130 00102030 0800848E */  lw         $4, 0x8($20)
/* 2134 00102034 3C100200 */  dsll32     $2, $2, 0
/* 2138 00102038 3F100200 */  dsra32     $2, $2, 0
/* 213C 0010203C 2500033C */  lui        $3, (0x250238 >> 16)
/* 2140 00102040 040082AC */  sw         $2, 0x4($4)
/* 2144 00102044 2D204002 */  daddu      $4, $18, $0
/* 2148 00102048 3802628C */  lw         $2, (0x250238 & 0xFFFF)($3)
/* 214C 0010204C 23105300 */  subu       $2, $2, $19
/* 2150 00102050 8C0D040C */  jal        __malloc_unlock
/* 2154 00102054 380262AC */   sw        $2, (0x250238 & 0xFFFF)($3)
/* 2158 00102058 01000224 */  addiu      $2, $0, 0x1
.L0010205C:
/* 215C 0010205C 5000BFDF */  ld         $31, 0x50($sp)
/* 2160 00102060 4000B4DF */  ld         $20, 0x40($sp)
/* 2164 00102064 3000B3DF */  ld         $19, 0x30($sp)
/* 2168 00102068 2000B2DF */  ld         $18, 0x20($sp)
/* 216C 0010206C 1000B1DF */  ld         $17, 0x10($sp)
/* 2170 00102070 0000B0DF */  ld         $16, 0x0($sp)
/* 2174 00102074 0800E003 */  jr         $31
/* 2178 00102078 6000BD27 */   addiu     $sp, $sp, 0x60
/* 217C 0010207C 00000000 */  nop
