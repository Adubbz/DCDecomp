.include "macro.inc"

.set noat      /* allow manual use of $at */
.set noreorder /* don't insert nops after branches */

glabel sceVif1PkRefLoadImage
/* 21158 00121058 40FFBD27 */  addiu      $sp, $sp, -0xC0
/* 2115C 0012105C 2A00023C */  lui        $2, %hi(D_00298C98)
/* 21160 00121060 9000B7FF */  sd         $23, 0x90($sp)
/* 21164 00121064 988C4324 */  addiu      $3, $2, %lo(D_00298C98)
/* 21168 00121068 2DB88000 */  daddu      $23, $4, $0
/* 2116C 0012106C A000BEFF */  sd         $fp, 0xA0($sp)
/* 21170 00121070 8000B6FF */  sd         $22, 0x80($sp)
/* 21174 00121074 2DF02001 */  daddu      $fp, $9, $0
/* 21178 00121078 7000B5FF */  sd         $21, 0x70($sp)
/* 2117C 0012107C 2DB04001 */  daddu      $22, $10, $0
/* 21180 00121080 6000B4FF */  sd         $20, 0x60($sp)
/* 21184 00121084 2DA86001 */  daddu      $21, $11, $0
/* 21188 00121088 5000B3FF */  sd         $19, 0x50($sp)
/* 2118C 0012108C 2DA00001 */  daddu      $20, $8, $0
/* 21190 00121090 4000B2FF */  sd         $18, 0x40($sp)
/* 21194 00121094 FF00D330 */  andi       $19, $6, 0xFF
/* 21198 00121098 3000B1FF */  sd         $17, 0x30($sp)
/* 2119C 0012109C 2000B0FF */  sd         $16, 0x20($sp)
/* 211A0 001210A0 FFFFF130 */  andi       $17, $7, 0xFFFF
/* 211A4 001210A4 B000BFFF */  sd         $31, 0xB0($sp)
/* 211A8 001210A8 FFFFB030 */  andi       $16, $5, 0xFFFF
/* 211AC 001210AC 988C44DC */  ld         $4, -0x7368($2)
/* 211B0 001210B0 2D280000 */  daddu      $5, $0, $0
/* 211B4 001210B4 08006CDC */  ld         $12, 0x8($3)
/* 211B8 001210B8 0000A4FF */  sd         $4, 0x0($sp)
/* 211BC 001210BC C000B28F */  lw         $18, 0xC0($sp)
/* 211C0 001210C0 2D20E002 */  daddu      $4, $23, $0
/* 211C4 001210C4 2083040C */  jal        sceVif1PkCnt
/* 211C8 001210C8 0800ACFF */   sd        $12, 0x8($sp)
/* 211CC 001210CC 2D20E002 */  daddu      $4, $23, $0
/* 211D0 001210D0 8E83040C */  jal        sceVif1PkOpenDirectCode
/* 211D4 001210D4 2D280000 */   daddu     $5, $0, $0
/* 211D8 001210D8 0000A57B */  lq         $5, 0x0($sp)
/* 211DC 001210DC B083040C */  jal        sceVif1PkOpenGifTag
/* 211E0 001210E0 2D20E002 */   daddu     $4, $23, $0
/* 211E4 001210E4 3C801000 */  dsll32     $16, $16, 0
/* 211E8 001210E8 3C8C1100 */  dsll32     $17, $17, 16
/* 211EC 001210EC 25801102 */  or         $16, $16, $17
/* 211F0 001210F0 3C9E1300 */  dsll32     $19, $19, 24
/* 211F4 001210F4 25301302 */  or         $6, $16, $19
/* 211F8 001210F8 2D20E002 */  daddu      $4, $23, $0
/* 211FC 001210FC 0A84040C */  jal        sceVif1PkAddGsAD
/* 21200 00121100 50000524 */   addiu     $5, $0, 0x50
/* 21204 00121104 3CB01600 */  dsll32     $22, $22, 0
/* 21208 00121108 3CAC1500 */  dsll32     $21, $21, 16
/* 2120C 0012110C 2530D502 */  or         $6, $22, $21
/* 21210 00121110 2D20E002 */  daddu      $4, $23, $0
/* 21214 00121114 0A84040C */  jal        sceVif1PkAddGsAD
/* 21218 00121118 51000524 */   addiu     $5, $0, 0x51
/* 2121C 0012111C C800A28F */  lw         $2, 0xC8($sp)
/* 21220 00121120 3C901200 */  dsll32     $18, $18, 0
/* 21224 00121124 3E901200 */  dsrl32     $18, $18, 0
/* 21228 00121128 2D20E002 */  daddu      $4, $23, $0
/* 2122C 0012112C 3C100200 */  dsll32     $2, $2, 0
/* 21230 00121130 52000524 */  addiu      $5, $0, 0x52
/* 21234 00121134 1000A2FF */  sd         $2, 0x10($sp)
/* 21238 00121138 0A84040C */  jal        sceVif1PkAddGsAD
/* 2123C 0012113C 25304202 */   or        $6, $18, $2
/* 21240 00121140 2D20E002 */  daddu      $4, $23, $0
/* 21244 00121144 53000524 */  addiu      $5, $0, 0x53
/* 21248 00121148 0A84040C */  jal        sceVif1PkAddGsAD
/* 2124C 0012114C 2D300000 */   daddu     $6, $0, $0
/* 21250 00121150 B683040C */  jal        sceVif1PkCloseGifTag
/* 21254 00121154 2D20E002 */   daddu     $4, $23, $0
/* 21258 00121158 A483040C */  jal        sceVif1PkCloseDirectCode
/* 2125C 0012115C 2D20E002 */   daddu     $4, $23, $0
/* 21260 00121160 2B00C013 */  beqz       $fp, .L00121210
/* 21264 00121164 FF7F1124 */   addiu     $17, $0, 0x7FFF
/* 21268 00121168 0008153C */  lui        $21, (0x8000000 >> 16)
/* 2126C 0012116C 3CA81500 */  dsll32     $21, $21, 0
/* 21270 00121170 0080B536 */  ori        $21, $21, 0x8000
/* 21274 00121174 00801334 */  ori        $19, $0, 0x8000
/* 21278 00121178 3C9B1300 */  dsll32     $19, $19, 12
/* 2127C 0012117C 0051123C */  lui        $18, (0x51000000 >> 16)
.L00121180:
/* 21280 00121180 2B103E02 */  sltu       $2, $17, $fp
/* 21284 00121184 2D802002 */  daddu      $16, $17, $0
/* 21288 00121188 0A80C203 */  movz       $16, $fp, $2
/* 2128C 0012118C 2D20E002 */  daddu      $4, $23, $0
/* 21290 00121190 2083040C */  jal        sceVif1PkCnt
/* 21294 00121194 2D280000 */   daddu     $5, $0, $0
/* 21298 00121198 2D20E002 */  daddu      $4, $23, $0
/* 2129C 0012119C 02000524 */  addiu      $5, $0, 0x2
/* 212A0 001211A0 E483040C */  jal        sceVif1PkAlign
/* 212A4 001211A4 03000624 */   addiu     $6, $0, 0x3
/* 212A8 001211A8 0050053C */  lui        $5, (0x50000001 >> 16)
/* 212AC 001211AC 2D20E002 */  daddu      $4, $23, $0
/* 212B0 001211B0 0484040C */  jal        sceVif1PkAddCode
/* 212B4 001211B4 0100A534 */   ori       $5, $5, (0x50000001 & 0xFFFF)
/* 212B8 001211B8 2D20E002 */  daddu      $4, $23, $0
/* 212BC 001211BC DE83040C */  jal        sceVif1PkReserve
/* 212C0 001211C0 04000524 */   addiu     $5, $0, 0x4
/* 212C4 001211C4 3C181000 */  dsll32     $3, $16, 0
/* 212C8 001211C8 26281E02 */  xor        $5, $16, $fp
/* 212CC 001211CC 3E180300 */  dsrl32     $3, $3, 0
/* 212D0 001211D0 2D300002 */  daddu      $6, $16, $0
/* 212D4 001211D4 25207500 */  or         $4, $3, $21
/* 212D8 001211D8 25401202 */  or         $8, $16, $18
/* 212DC 001211DC 25187300 */  or         $3, $3, $19
/* 212E0 001211E0 080040FC */  sd         $0, 0x8($2)
/* 212E4 001211E4 0A188500 */  movz       $3, $4, $5
/* 212E8 001211E8 2D380000 */  daddu      $7, $0, $0
/* 212EC 001211EC 2D288002 */  daddu      $5, $20, $0
/* 212F0 001211F0 000043FC */  sd         $3, 0x0($2)
/* 212F4 001211F4 2D20E002 */  daddu      $4, $23, $0
/* 212F8 001211F8 2D480000 */  daddu      $9, $0, $0
/* 212FC 001211FC 3683040C */  jal        sceVif1PkRef
/* 21300 00121200 23F0D003 */   subu      $fp, $fp, $16
/* 21304 00121204 00811000 */  sll        $16, $16, 4
/* 21308 00121208 DDFFC017 */  bnez       $fp, .L00121180
/* 2130C 0012120C 21A09002 */   addu      $20, $20, $16
.L00121210:
/* 21310 00121210 B000BFDF */  ld         $31, 0xB0($sp)
/* 21314 00121214 A000BEDF */  ld         $fp, 0xA0($sp)
/* 21318 00121218 9000B7DF */  ld         $23, 0x90($sp)
/* 2131C 0012121C 8000B6DF */  ld         $22, 0x80($sp)
/* 21320 00121220 7000B5DF */  ld         $21, 0x70($sp)
/* 21324 00121224 6000B4DF */  ld         $20, 0x60($sp)
/* 21328 00121228 5000B3DF */  ld         $19, 0x50($sp)
/* 2132C 0012122C 4000B2DF */  ld         $18, 0x40($sp)
/* 21330 00121230 3000B1DF */  ld         $17, 0x30($sp)
/* 21334 00121234 2000B0DF */  ld         $16, 0x20($sp)
/* 21338 00121238 0800E003 */  jr         $31
/* 2133C 0012123C C000BD27 */   addiu     $sp, $sp, 0xC0
