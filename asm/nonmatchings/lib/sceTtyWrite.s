.include "macro.inc"

.set noat      /* allow manual use of $at */
.set noreorder /* don't insert nops after branches */

# Handwritten function
glabel sceTtyWrite
/* 158C8 001157C8 C0FFBD27 */  addiu      $sp, $sp, -0x40
/* 158CC 001157CC 2D388000 */  daddu      $7, $4, $0
/* 158D0 001157D0 1000B1FF */  sd         $17, 0x10($sp)
/* 158D4 001157D4 2D400000 */  daddu      $8, $0, $0
/* 158D8 001157D8 2000B2FF */  sd         $18, 0x20($sp)
/* 158DC 001157DC 2A00113C */  lui        $17, (0x2A5510 >> 16)
/* 158E0 001157E0 3000BFFF */  sd         $31, 0x30($sp)
/* 158E4 001157E4 10552226 */  addiu      $2, $17, %lo(D_002A5510)
/* 158E8 001157E8 0000B0FF */  sd         $16, 0x0($sp)
/* 158EC 001157EC 2D900000 */  daddu      $18, $0, $0
/* 158F0 001157F0 0C00438C */  lw         $3, 0xC($2)
/* 158F4 001157F4 42006014 */  bnez       $3, .L00115900
/* 158F8 001157F8 FFFF0224 */   addiu     $2, $0, -0x1
/* 158FC 001157FC FFFFA524 */  addiu      $5, $5, -0x1
/* 15900 00115800 0100033C */  lui        $3, (0x10000 >> 16)
/* 15904 00115804 00000000 */  nop
.L00115808:
/* 15908 00115808 39000042 */  di # handwritten instruction
/* 1590C 0011580C 0F040000 */  sync.p
/* 15910 00115810 00600240 */  mfc0       $2, $12 # handwritten instruction
/* 15914 00115814 24104300 */  and        $2, $2, $3
/* 15918 00115818 00000000 */  nop
/* 1591C 0011581C FAFF4014 */  bnez       $2, .L00115808
/* 15920 00115820 00000000 */   nop
/* 15924 00115824 2A00023C */  lui        $2, %hi(D_002A5540)
/* 15928 00115828 0020033C */  lui        $3, (0x20000000 >> 16)
/* 1592C 0011582C 40554224 */  addiu      $2, $2, %lo(D_002A5540)
/* 15930 00115830 10552426 */  addiu      $4, $17, %lo(D_002A5510)
/* 15934 00115834 25484300 */  or         $9, $2, $3
/* 15938 00115838 01000224 */  addiu      $2, $0, 0x1
/* 1593C 0011583C 100089AC */  sw         $9, 0x10($4)
/* 15940 00115840 0C0082AC */  sw         $2, 0xC($4)
/* 15944 00115844 03000010 */  b          .L00115854
/* 15948 00115848 0C002625 */   addiu     $6, $9, 0xC
/* 1594C 0011584C 00000000 */  nop
.L00115850:
/* 15950 00115850 FFFFA524 */  addiu      $5, $5, -0x1
.L00115854:
/* 15954 00115854 FFFF0224 */  addiu      $2, $0, -0x1
/* 15958 00115858 1200A210 */  beq        $5, $2, .L001158A4
/* 1595C 0011585C 0A000224 */   addiu     $2, $0, 0xA
/* 15960 00115860 0000E380 */  lb         $3, 0x0($7)
/* 15964 00115864 08006214 */  bne        $3, $2, .L00115888
/* 15968 00115868 0000E490 */   lbu       $4, 0x0($7)
/* 1596C 0011586C 0D000224 */  addiu      $2, $0, 0xD
/* 15970 00115870 01000825 */  addiu      $8, $8, 0x1
/* 15974 00115874 0000C2A0 */  sb         $2, 0x0($6)
/* 15978 00115878 00010329 */  slti       $3, $8, 0x100
/* 1597C 0011587C 09006010 */  beqz       $3, .L001158A4
/* 15980 00115880 0100C624 */   addiu     $6, $6, 0x1
/* 15984 00115884 0000E490 */  lbu        $4, 0x0($7)
.L00115888:
/* 15988 00115888 0000C4A0 */  sb         $4, 0x0($6)
/* 1598C 0011588C 01000825 */  addiu      $8, $8, 0x1
/* 15990 00115890 0100E724 */  addiu      $7, $7, 0x1
/* 15994 00115894 0100C624 */  addiu      $6, $6, 0x1
/* 15998 00115898 00010229 */  slti       $2, $8, 0x100
/* 1599C 0011589C ECFF4014 */  bnez       $2, .L00115850
/* 159A0 001158A0 01005226 */   addiu     $18, $18, 0x1
.L001158A4:
/* 159A4 001158A4 10553026 */  addiu      $16, $17, %lo(D_002A5510)
/* 159A8 001158A8 0C000225 */  addiu      $2, $8, 0xC
/* 159AC 001158AC 040002AE */  sw         $2, 0x4($16)
/* 159B0 001158B0 0400038E */  lw         $3, 0x4($16)
/* 159B4 001158B4 07002581 */  lb         $5, 0x7($9)
/* 159B8 001158B8 1055248E */  lw         $4, (0x2A5510 & 0xFFFF)($17)
/* 159BC 001158BC 0655040C */  jal        sceDeci2ReqSend
/* 159C0 001158C0 000023A5 */   sh        $3, 0x0($9)
/* 159C4 001158C4 09004104 */  bgez       $2, .L001158EC
/* 159C8 001158C8 00000000 */   nop
/* 159CC 001158CC 0C0000AE */  sw         $0, 0xC($16)
/* 159D0 001158D0 38000042 */  ei # handwritten instruction
/* 159D4 001158D4 0A000010 */  b          .L00115900
/* 159D8 001158D8 FFFF0224 */   addiu     $2, $0, -0x1
/* 159DC 001158DC 00000000 */  nop
.L001158E0:
/* 159E0 001158E0 1055248E */  lw         $4, (0x2A5510 & 0xFFFF)($17)
/* 159E4 001158E4 1255040C */  jal        sceDeci2Poll
/* 159E8 001158E8 00000000 */   nop
.L001158EC:
/* 159EC 001158EC 0C00028E */  lw         $2, 0xC($16)
/* 159F0 001158F0 FBFF4014 */  bnez       $2, .L001158E0
/* 159F4 001158F4 00000000 */   nop
/* 159F8 001158F8 38000042 */  ei # handwritten instruction
/* 159FC 001158FC 2D104002 */  daddu      $2, $18, $0
.L00115900:
/* 15A00 00115900 3000BFDF */  ld         $31, 0x30($sp)
/* 15A04 00115904 2000B2DF */  ld         $18, 0x20($sp)
/* 15A08 00115908 1000B1DF */  ld         $17, 0x10($sp)
/* 15A0C 0011590C 0000B0DF */  ld         $16, 0x0($sp)
/* 15A10 00115910 0800E003 */  jr         $31
/* 15A14 00115914 4000BD27 */   addiu     $sp, $sp, 0x40
