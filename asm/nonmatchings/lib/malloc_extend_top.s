.include "macro.inc"

.set noat      /* allow manual use of $at */
.set noreorder /* don't insert nops after branches */

glabel malloc_extend_top
/* 2928 00102828 60FFBD27 */  addiu      $sp, $sp, -0xA0
/* 292C 0010282C 2500023C */  lui        $2, %hi(__malloc_av_)
/* 2930 00102830 7000B7FF */  sd         $23, 0x70($sp)
/* 2934 00102834 08FE4224 */  addiu      $2, $2, %lo(__malloc_av_)
/* 2938 00102838 6000B6FF */  sd         $22, 0x60($sp)
/* 293C 0010283C 2500063C */  lui        $6, (0x250218 >> 16)
/* 2940 00102840 5000B5FF */  sd         $21, 0x50($sp)
/* 2944 00102844 3C280500 */  dsll32     $5, $5, 0
/* 2948 00102848 3000B3FF */  sd         $19, 0x30($sp)
/* 294C 0010284C 3E280500 */  dsrl32     $5, $5, 0
/* 2950 00102850 2000B2FF */  sd         $18, 0x20($sp)
/* 2954 00102854 2500163C */  lui        $22, (0x250220 >> 16)
/* 2958 00102858 0000B0FF */  sd         $16, 0x0($sp)
/* 295C 0010285C 2DB88000 */  daddu      $23, $4, $0
/* 2960 00102860 9000BFFF */  sd         $31, 0x90($sp)
/* 2964 00102864 FFFF103C */  lui        $16, (0xFFFFFFFF >> 16)
/* 2968 00102868 8000BEFF */  sd         $fp, 0x80($sp)
/* 296C 0010286C FFFF1036 */  ori        $16, $16, (0xFFFFFFFF & 0xFFFF)
/* 2970 00102870 1000B1FF */  sd         $17, 0x10($sp)
/* 2974 00102874 4000B4FF */  sd         $20, 0x40($sp)
/* 2978 00102878 0800548C */  lw         $20, 0x8($2)
/* 297C 0010287C 1802C3DC */  ld         $3, (0x250218 & 0xFFFF)($6)
/* 2980 00102880 FFFF023C */  lui        $2, (0xFFFFFFFC >> 16)
/* 2984 00102884 0400868E */  lw         $6, 0x4($20)
/* 2988 00102888 FCFF4234 */  ori        $2, $2, (0xFFFFFFFC & 0xFFFF)
/* 298C 0010288C 2D28A300 */  daddu      $5, $5, $3
/* 2990 00102890 2498C200 */  and        $19, $6, $2
/* 2994 00102894 1000A564 */  daddiu     $5, $5, 0x10
/* 2998 00102898 2002C28E */  lw         $2, (0x250220 & 0xFFFF)($22)
/* 299C 0010289C 3C900500 */  dsll32     $18, $5, 0
/* 29A0 001028A0 3F901200 */  dsra32     $18, $18, 0
/* 29A4 001028A4 08005010 */  beq        $2, $16, .L001028C8
/* 29A8 001028A8 21A89302 */   addu      $21, $20, $19
/* 29AC 001028AC 3C101200 */  dsll32     $2, $18, 0
/* 29B0 001028B0 00F00324 */  addiu      $3, $0, -0x1000
/* 29B4 001028B4 3E100200 */  dsrl32     $2, $2, 0
/* 29B8 001028B8 FF0F4264 */  daddiu     $2, $2, 0xFFF
/* 29BC 001028BC 24104300 */  and        $2, $2, $3
/* 29C0 001028C0 3C900200 */  dsll32     $18, $2, 0
/* 29C4 001028C4 3F901200 */  dsra32     $18, $18, 0
.L001028C8:
/* 29C8 001028C8 2D20E002 */  daddu      $4, $23, $0
/* 29CC 001028CC 8212040C */  jal        _sbrk_r
/* 29D0 001028D0 2D284002 */   daddu     $5, $18, $0
/* 29D4 001028D4 2D884000 */  daddu      $17, $2, $0
/* 29D8 001028D8 5C003012 */  beq        $17, $16, .L00102A4C
/* 29DC 001028DC 2B103502 */   sltu      $2, $17, $21
/* 29E0 001028E0 04004010 */  beqz       $2, .L001028F4
/* 29E4 001028E4 2500043C */   lui       $4, %hi(__malloc_av_)
/* 29E8 001028E8 08FE8424 */  addiu      $4, $4, %lo(__malloc_av_)
/* 29EC 001028EC 58008416 */  bne        $20, $4, .L00102A50
/* 29F0 001028F0 9000BFDF */   ld        $31, 0x90($sp)
.L001028F4:
/* 29F4 001028F4 25001E3C */  lui        $fp, (0x250238 >> 16)
/* 29F8 001028F8 3802C28F */  lw         $2, (0x250238 & 0xFFFF)($fp)
/* 29FC 001028FC 21185200 */  addu       $3, $2, $18
/* 2A00 00102900 08003516 */  bne        $17, $21, .L00102924
/* 2A04 00102904 3802C3AF */   sw        $3, (0x250238 & 0xFFFF)($fp)
/* 2A08 00102908 2500053C */  lui        $5, %hi(__malloc_av_)
/* 2A0C 0010290C 21105302 */  addu       $2, $18, $19
/* 2A10 00102910 08FEA524 */  addiu      $5, $5, %lo(__malloc_av_)
/* 2A14 00102914 01004234 */  ori        $2, $2, 0x1
/* 2A18 00102918 0800A38C */  lw         $3, 0x8($5)
/* 2A1C 0010291C 3F000010 */  b          .L00102A1C
/* 2A20 00102920 040062AC */   sw        $2, 0x4($3)
.L00102924:
/* 2A24 00102924 2002C28E */  lw         $2, (0x250220 & 0xFFFF)($22)
/* 2A28 00102928 03005014 */  bne        $2, $16, .L00102938
/* 2A2C 0010292C 23103502 */   subu      $2, $17, $21
/* 2A30 00102930 03000010 */  b          .L00102940
/* 2A34 00102934 2002D1AE */   sw        $17, (0x250220 & 0xFFFF)($22)
.L00102938:
/* 2A38 00102938 21106200 */  addu       $2, $3, $2
/* 2A3C 0010293C 3802C2AF */  sw         $2, (0x250238 & 0xFFFF)($fp)
.L00102940:
/* 2A40 00102940 08002226 */  addiu      $2, $17, 0x8
/* 2A44 00102944 0F004530 */  andi       $5, $2, 0xF
/* 2A48 00102948 0400A010 */  beqz       $5, .L0010295C
/* 2A4C 0010294C 10000224 */   addiu     $2, $0, 0x10
/* 2A50 00102950 23804500 */  subu       $16, $2, $5
/* 2A54 00102954 02000010 */  b          .L00102960
/* 2A58 00102958 21883002 */   addu      $17, $17, $16
.L0010295C:
/* 2A5C 0010295C 2D800000 */  daddu      $16, $0, $0
.L00102960:
/* 2A60 00102960 21103202 */  addu       $2, $17, $18
/* 2A64 00102964 00100324 */  addiu      $3, $0, 0x1000
/* 2A68 00102968 FF0F4230 */  andi       $2, $2, 0xFFF
/* 2A6C 0010296C 2D20E002 */  daddu      $4, $23, $0
/* 2A70 00102970 2F186200 */  dsubu      $3, $3, $2
/* 2A74 00102974 3C180300 */  dsll32     $3, $3, 0
/* 2A78 00102978 3F180300 */  dsra32     $3, $3, 0
/* 2A7C 0010297C 21800302 */  addu       $16, $16, $3
/* 2A80 00102980 8212040C */  jal        _sbrk_r
/* 2A84 00102984 2D280002 */   daddu     $5, $16, $0
/* 2A88 00102988 2D204000 */  daddu      $4, $2, $0
/* 2A8C 0010298C FFFF023C */  lui        $2, (0xFFFFFFFF >> 16)
/* 2A90 00102990 FFFF4234 */  ori        $2, $2, (0xFFFFFFFF & 0xFFFF)
/* 2A94 00102994 2D008210 */  beq        $4, $2, .L00102A4C
/* 2A98 00102998 23109100 */   subu      $2, $4, $17
/* 2A9C 0010299C 3802C38F */  lw         $3, (0x250238 & 0xFFFF)($fp)
/* 2AA0 001029A0 21105000 */  addu       $2, $2, $16
/* 2AA4 001029A4 2500053C */  lui        $5, %hi(__malloc_av_)
/* 2AA8 001029A8 21187000 */  addu       $3, $3, $16
/* 2AAC 001029AC 08FEA424 */  addiu      $4, $5, %lo(__malloc_av_)
/* 2AB0 001029B0 01004234 */  ori        $2, $2, 0x1
/* 2AB4 001029B4 3802C3AF */  sw         $3, (0x250238 & 0xFFFF)($fp)
/* 2AB8 001029B8 040022AE */  sw         $2, 0x4($17)
/* 2ABC 001029BC 17008412 */  beq        $20, $4, .L00102A1C
/* 2AC0 001029C0 080091AC */   sw        $17, 0x8($4)
/* 2AC4 001029C4 1000622E */  sltiu      $2, $19, 0x10
/* 2AC8 001029C8 03004010 */  beqz       $2, .L001029D8
/* 2ACC 001029CC 01000224 */   addiu     $2, $0, 0x1
/* 2AD0 001029D0 1E000010 */  b          .L00102A4C
/* 2AD4 001029D4 040022AE */   sw        $2, 0x4($17)
.L001029D8:
/* 2AD8 001029D8 0400838E */  lw         $3, 0x4($20)
/* 2ADC 001029DC FFFF023C */  lui        $2, (0xFFFFFFF0 >> 16)
/* 2AE0 001029E0 F4FF6426 */  addiu      $4, $19, -0xC
/* 2AE4 001029E4 F0FF4234 */  ori        $2, $2, (0xFFFFFFF0 & 0xFFFF)
/* 2AE8 001029E8 24988200 */  and        $19, $4, $2
/* 2AEC 001029EC 01006330 */  andi       $3, $3, 0x1
/* 2AF0 001029F0 25187300 */  or         $3, $3, $19
/* 2AF4 001029F4 21209302 */  addu       $4, $20, $19
/* 2AF8 001029F8 040083AE */  sw         $3, 0x4($20)
/* 2AFC 001029FC 05000224 */  addiu      $2, $0, 0x5
/* 2B00 00102A00 080082AC */  sw         $2, 0x8($4)
/* 2B04 00102A04 1000632E */  sltiu      $3, $19, 0x10
/* 2B08 00102A08 04006014 */  bnez       $3, .L00102A1C
/* 2B0C 00102A0C 040082AC */   sw        $2, 0x4($4)
/* 2B10 00102A10 2D20E002 */  daddu      $4, $23, $0
/* 2B14 00102A14 FC06040C */  jal        _free_r
/* 2B18 00102A18 08008526 */   addiu     $5, $20, 0x8
.L00102A1C:
/* 2B1C 00102A1C 2500053C */  lui        $5, (0x250228 >> 16)
/* 2B20 00102A20 3802C38F */  lw         $3, (0x250238 & 0xFFFF)($fp)
/* 2B24 00102A24 2802A2DC */  ld         $2, (0x250228 & 0xFFFF)($5)
/* 2B28 00102A28 2B104300 */  sltu       $2, $2, $3
/* 2B2C 00102A2C 02004010 */  beqz       $2, .L00102A38
/* 2B30 00102A30 2D206000 */   daddu     $4, $3, $0
/* 2B34 00102A34 2802A3FC */  sd         $3, (0x250228 & 0xFFFF)($5)
.L00102A38:
/* 2B38 00102A38 2500033C */  lui        $3, (0x250230 >> 16)
/* 2B3C 00102A3C 300262DC */  ld         $2, (0x250230 & 0xFFFF)($3)
/* 2B40 00102A40 2B104400 */  sltu       $2, $2, $4
/* 2B44 00102A44 01004054 */  bnel       $2, $0, .L00102A4C
/* 2B48 00102A48 300264FC */   sd        $4, (0x250230 & 0xFFFF)($3)
.L00102A4C:
/* 2B4C 00102A4C 9000BFDF */  ld         $31, 0x90($sp)
.L00102A50:
/* 2B50 00102A50 8000BEDF */  ld         $fp, 0x80($sp)
/* 2B54 00102A54 7000B7DF */  ld         $23, 0x70($sp)
/* 2B58 00102A58 6000B6DF */  ld         $22, 0x60($sp)
/* 2B5C 00102A5C 5000B5DF */  ld         $21, 0x50($sp)
/* 2B60 00102A60 4000B4DF */  ld         $20, 0x40($sp)
/* 2B64 00102A64 3000B3DF */  ld         $19, 0x30($sp)
/* 2B68 00102A68 2000B2DF */  ld         $18, 0x20($sp)
/* 2B6C 00102A6C 1000B1DF */  ld         $17, 0x10($sp)
/* 2B70 00102A70 0000B0DF */  ld         $16, 0x0($sp)
/* 2B74 00102A74 0800E003 */  jr         $31
/* 2B78 00102A78 A000BD27 */   addiu     $sp, $sp, 0xA0
/* 2B7C 00102A7C 00000000 */  nop
